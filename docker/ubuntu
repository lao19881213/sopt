FROM ubuntu:latest
RUN apt-get update && apt-get install -y g++ cmake cmake-extras \
      extra-cmake-modules libeigen3-dev git libtiff-dev libfftw3-dev
RUN apt-get install -y python3 python3-dev python3-numpy python3-setuptools \
            python3-pytest python3-pandas python3-pip cython3
RUN pip3 install PyWavelets

VOLUME /code
WORKDIR /code
RUN chmod a+rwX -R /code 

ADD docker/build_and_test.sh /usr/bin
RUN chmod a+rx /usr/bin/build_and_test.sh

RUN useradd -ms /bin/bash bico
USER bico

CMD /usr/bin/build_and_test.sh
